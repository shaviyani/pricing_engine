<div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Channel
                </th>
                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Guest Rate
                </th>
                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                    vs BAR
                </th>
                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Net Revenue
                </th>
                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Status
                </th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for item in parity_data %}
            <tr class="hover:bg-gray-50 transition">
                <td class="px-4 py-3 whitespace-nowrap">
                    <div class="flex items-center">
                        <div>
                            <div class="text-sm font-medium text-gray-900">{{ item.channel.name }}</div>
                            {% if item.channel.commission_percent > 0 %}
                            <div class="text-xs text-gray-500">{{ item.channel.commission_percent }}% commission</div>
                            {% endif %}
                        </div>
                    </div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap text-right">
                    <div class="text-sm font-semibold text-gray-900">${{ item.rate }}</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap text-right">
                    {% if item.difference_percent < 0 %}
                    <div class="text-sm font-medium text-red-600">
                        {{ item.difference_percent|floatformat:1 }}%
                    </div>
                    <div class="text-xs text-gray-500">${{ item.difference|floatformat:2 }}</div>
                    {% elif item.difference_percent > 1 %}
                    <div class="text-sm font-medium text-blue-600">
                        +{{ item.difference_percent|floatformat:1 }}%
                    </div>
                    <div class="text-xs text-gray-500">+${{ item.difference|floatformat:2 }}</div>
                    {% else %}
                    <div class="text-sm font-medium text-green-600">
                        0.0%
                    </div>
                    <div class="text-xs text-gray-500">At parity</div>
                    {% endif %}
                </td>
                <td class="px-4 py-3 whitespace-nowrap text-right">
                    <div class="text-sm font-medium text-gray-900">${{ item.net_revenue }}</div>
                    {% if item.channel.commission_percent > 0 %}
                    <div class="text-xs text-gray-500">
                        After {{ item.channel.commission_percent }}% commission
                    </div>
                    {% endif %}
                </td>
                <td class="px-4 py-3 whitespace-nowrap text-center">
                    {% if item.status == 'good' %}
                    <span class="inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800">
                        ✓ {{ item.status_text }}
                    </span>
                    {% elif item.status == 'warning' %}
                    <span class="inline-flex px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800">
                        ⚠ {{ item.status_text }}
                    </span>
                    {% else %}
                    <span class="inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800">
                        ℹ {{ item.status_text }}
                    </span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Parity Legend -->
<div class="mt-4 p-4 bg-gray-50 rounded-lg">
    <div class="flex items-start space-x-6 text-xs">
        <div class="flex items-center space-x-2">
            <span class="w-3 h-3 bg-green-500 rounded-full"></span>
            <span class="text-gray-600"><strong>At Parity:</strong> Within 1% of BAR</span>
        </div>
        <div class="flex items-center space-x-2">
            <span class="w-3 h-3 bg-red-500 rounded-full"></span>
            <span class="text-gray-600"><strong>Below BAR:</strong> Lower than direct rate (potential parity issue)</span>
        </div>
        <div class="flex items-center space-x-2">
            <span class="w-3 h-3 bg-blue-500 rounded-full"></span>
            <span class="text-gray-600"><strong>Above BAR:</strong> Higher than direct rate (premium positioning)</span>
        </div>
    </div>
</div>